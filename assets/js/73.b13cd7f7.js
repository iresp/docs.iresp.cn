(window.webpackJsonp=window.webpackJsonp||[]).push([[73],{352:function(s,t,a){"use strict";a.r(t);var e=a(14),n=Object(e.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"linux-服务器运维"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#linux-服务器运维"}},[s._v("#")]),s._v(" Linux 服务器运维")]),s._v(" "),t("h2",{attrs:{id:"ubuntu"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ubuntu"}},[s._v("#")]),s._v(" Ubuntu")]),s._v(" "),t("p",[s._v("下载系统："),t("a",{attrs:{href:"https://ubuntu.com/download/server",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://ubuntu.com/download/server"),t("OutboundLink")],1)]),s._v(" "),t("h3",{attrs:{id:"初始化配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#初始化配置"}},[s._v("#")]),s._v(" 初始化配置")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置阿里云源（可选：根据不用云厂商进行设置）")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" /etc/apt/sources.list /etc/apt/sources.list.bak\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/apt/sources.list\ndeb http://mirrors.aliyun.com/ubuntu/ trusty main restricted universe multiverse\ndeb http://mirrors.aliyun.com/ubuntu/ trusty-security main restricted universe multiverse\ndeb http://mirrors.aliyun.com/ubuntu/ trusty-updates main restricted universe multiverse\ndeb http://mirrors.aliyun.com/ubuntu/ trusty-proposed main restricted universe multiverse\ndeb http://mirrors.aliyun.com/ubuntu/ trusty-backports main restricted universe multiverse\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#deb-src http://mirrors.aliyun.com/ubuntu/ trusty main restricted universe multiverse")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#deb-src http://mirrors.aliyun.com/ubuntu/ trusty-security main restricted universe multiverse")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#deb-src http://mirrors.aliyun.com/ubuntu/ trusty-updates main restricted universe multiverse")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#deb-src http://mirrors.aliyun.com/ubuntu/ trusty-proposed main restricted universe multiverse")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#deb-src http://mirrors.aliyun.com/ubuntu/ trusty-backports main restricted universe multiverse")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 更新系统")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" update\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果签名报错，请执行：")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" apt-key adv "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--keyserver")]),s._v(" keyserver.ubuntu.com --recv-keys 3B4FE6ACC0B21F32\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" upgrade\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 添加用户")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" adduser renfei\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 添加sudo权限")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("usermod")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-G")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" renfei\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/ssh/sshd_config\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 配置禁止密码登录")]),s._v("\nPasswordAuthentication no\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 禁止 root 远程登录")]),s._v("\nPermitRootLogin no\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 允许 SSH 仅使用密钥认证")]),s._v("\nPubkeyAuthentication "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# SSH 保持连接")]),s._v("\nClientAliveInterval "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("60")]),s._v("\nClientAliveCountMax "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重启 SSH 服务")]),s._v("\nsystemctl restart "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v("\n")])])]),t("p",[s._v("设置密钥，请上传自己的密钥：")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 自动设置密钥")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-fsSL")]),s._v(" https://cdn.renfei.net/public/ssh/sshkey.sh "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sh")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 手动设置密钥")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" ~/.ssh"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("700")]),s._v(" ~/.ssh"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-s")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://cdn.renfei.net/public/ssh/id_rsa.pub"')]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" ~/.ssh/authorized_keys"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("600")]),s._v(" ~/.ssh/authorized_keys"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("h3",{attrs:{id:"设置备份用户"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#设置备份用户"}},[s._v("#")]),s._v(" 设置备份用户")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 添加用户")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" adduser backup_user\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 限制登录")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("usermod")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-s")]),s._v(" /usr/sbin/nologin backup_user\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 编辑Key")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /home/backup_user/.ssh/authorized_keys\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("command")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/bin/false"')]),s._v(",no-agent-forwarding,no-port-forwarding,no-pty,no-user-rc,no-X11-forwarding ssh-rsa AAAAB3Nza"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".（用户公钥）\n")])])]),t("h4",{attrs:{id:"配置-swap"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置-swap"}},[s._v("#")]),s._v(" 配置 SWAP")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看当前 Swap 状态")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("swapon")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--show")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("free")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-h")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建 Swap 文件")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("dd")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("if")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/dev/zero "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("of")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/swap "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("bs")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("1M "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("count")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置权限")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("600")]),s._v(" /swap\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 格式化为 Swap 格式")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkswap")]),s._v(" /swap\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启用 Swap")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("swapon")]),s._v(" /swap\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 开机自动挂载 Swap")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/fstab\n/swap none swap sw "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 调整 Swap 相关参数")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 云服务器磁盘性能较差，建议尽量减少 Swap 使用")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"vm.swappiness=10"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tee")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-a")]),s._v(" /etc/sysctl.conf\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"vm.vfs_cache_pressure=50"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tee")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-a")]),s._v(" /etc/sysctl.conf\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sysctl")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v("\n")])])]),t("h4",{attrs:{id:"调整最大文件打开数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#调整最大文件打开数"}},[s._v("#")]),s._v(" 调整最大文件打开数")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 允许所有用户无限制文件打开数")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/security/limits.conf\n* soft nofile unlimited\n* hard nofile unlimited\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 有些 Ubuntu 版本使用 /etc/security/limits.d/ 进行管理，为确保生效，执行：")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"* soft nofile unlimited"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tee")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-a")]),s._v(" /etc/security/limits.d/custom_limits.conf\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"* hard nofile unlimited"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tee")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-a")]),s._v(" /etc/security/limits.d/custom_limits.conf\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Ubuntu 现代版本（使用 systemd）需要修改 system.conf 和 user.conf")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/systemd/system.conf\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DefaultLimitNOFILE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("infinity\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DefaultLimitNOFILESoft")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("infinity\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/systemd/user.conf\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DefaultLimitNOFILE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("infinity\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DefaultLimitNOFILESoft")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("infinity\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 编辑 PAM 配置 添加：")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/pam.d/common-session\nsession required pam_limits.so\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/pam.d/common-session-noninteractive\nsession required pam_limits.so\n")])])]),t("h4",{attrs:{id:"固定ip配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#固定ip配置"}},[s._v("#")]),s._v(" 固定IP配置")]),s._v(" "),t("p",[s._v("Netplan是最新版 Ubuntu 的默认网络管理工具。Netplan 的配置文件使用 YAML 编写，扩展名为.yaml。")]),s._v(" "),t("blockquote",[t("p",[s._v("注意：要小心配置文件中的空格，因为它们是语法的一部分。如果缩进不对，文件将无法正常读取。")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看当前网络配置")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ip")]),s._v(" a\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看上面命令输出的网卡名称，例如：eth0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /etc/netplan\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看文件夹下面的文件名称，并编辑")]),s._v("\nll /etc/netplan\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 请编辑你的文件，我这里文件名是例子01-network-manager-all.yaml")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" 01-network-manager-all.yaml\nnetwork:\n version: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n renderer: NetworkManager\n ethernets:\n   eth0: "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#注意这里改成你自己的网卡名")]),s._v("\n     dhcp4: no\n     addresses: "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.23")]),s._v(".207.254/20"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n     gateway4: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.1\n     nameservers:\n         addresses: "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8.8")]),s._v(".8.8,8.8.8.4"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" netplan apply\n")])])]),t("h3",{attrs:{id:"docker-安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker-安装"}},[s._v("#")]),s._v(" Docker 安装")]),s._v(" "),t("h4",{attrs:{id:"在线安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#在线安装"}},[s._v("#")]),s._v(" 在线安装")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Add Docker's official GPG key:")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" update\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" ca-certificates "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-m")]),s._v(" 0755 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" /etc/apt/keyrings\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-fsSL")]),s._v(" https://download.docker.com/linux/ubuntu/gpg "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-o")]),s._v(" /etc/apt/keyrings/docker.asc\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" a+r /etc/apt/keyrings/docker.asc\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Add the repository to Apt sources:")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"deb [arch='),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("dpkg --print-architecture"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v(" signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/ubuntu \\\n  "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" /etc/os-release "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$VERSION_CODENAME")]),s._v('"')]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v(' stable"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tee")]),s._v(" /etc/apt/sources.list.d/docker.list "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /dev/null\n")])])]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" update\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin\n")])])]),t("h4",{attrs:{id:"离线安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#离线安装"}},[s._v("#")]),s._v(" 离线安装")]),s._v(" "),t("ul",[t("li",[s._v("Go to "),t("a",{attrs:{href:"https://download.docker.com/linux/ubuntu/dists/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://download.docker.com/linux/ubuntu/dists/"),t("OutboundLink")],1)]),s._v(" "),t("li",[s._v("Select your Ubuntu version in the list.")]),s._v(" "),t("li",[s._v("Go to pool/stable/ and select the applicable architecture (amd64, armhf, arm64, or s390x).")]),s._v(" "),t("li",[s._v("Download the following deb files for the Docker Engine, CLI, containerd, and Docker Compose packages:\n"),t("ul",[t("li",[s._v("containerd.io_"),t("code",[s._v("<version>")]),s._v("_"),t("code",[s._v("<arch>")]),s._v(".deb")]),s._v(" "),t("li",[s._v("docker-ce_"),t("code",[s._v("<version>")]),s._v("_"),t("code",[s._v("<arch>")]),s._v(".deb")]),s._v(" "),t("li",[s._v("docker-ce-cli_"),t("code",[s._v("<version>")]),s._v("_"),t("code",[s._v("<arch>")]),s._v(".deb")]),s._v(" "),t("li",[s._v("docker-buildx-plugin_"),t("code",[s._v("<version>")]),s._v("_"),t("code",[s._v("<arch>")]),s._v(".deb")]),s._v(" "),t("li",[s._v("docker-compose-plugin_"),t("code",[s._v("<version>")]),s._v("_"),t("code",[s._v("<arch>")]),s._v(".deb")])])]),s._v(" "),t("li",[s._v("Install the .deb packages. Update the paths in the following example to where you downloaded the Docker packages.")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" dpkg "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-i")]),s._v(" ./containerd.io_"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("version"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("_"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("arch"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(".deb "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  ./docker-ce_"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("version"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("_"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("arch"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(".deb "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  ./docker-ce-cli_"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("version"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("_"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("arch"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(".deb "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  ./docker-buildx-plugin_"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("version"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("_"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("arch"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(".deb "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  ./docker-compose-plugin_"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("version"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("_"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("arch"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(".deb\n")])])]),t("ul",[t("li",[s._v("Verify that the installation is successful by running the hello-world image:")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" start\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run hello-world\n")])])]),t("h4",{attrs:{id:"portainer-ce-安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#portainer-ce-安装"}},[s._v("#")]),s._v(" Portainer CE 安装")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" pull portainer/portainer-ce:2.21.4\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" volume create portainer_data\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8000")]),s._v(":8000 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9443")]),s._v(":9443 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),s._v(" portainer "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--restart")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("always "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" /var/run/docker.sock:/var/run/docker.sock "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" portainer_data:/data portainer/portainer-ce:2.21.4\n")])])]),t("p",[s._v("登录："),t("a",{attrs:{href:"https://localhost:9443",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://localhost:9443"),t("OutboundLink")],1)]),s._v(" "),t("h3",{attrs:{id:"jdk-安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#jdk-安装"}},[s._v("#")]),s._v(" JDK 安装")]),s._v(" "),t("p",[s._v("下载对应的版本："),t("a",{attrs:{href:"https://adoptium.net/zh-CN/temurin/releases/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://adoptium.net/zh-CN/temurin/releases/"),t("OutboundLink")],1)])])}),[],!1,null,null,null);t.default=n.exports}}]);